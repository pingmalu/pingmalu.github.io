---
layout: post
title: 高并发
---

# 基准测试

## 环境

```
ThinkPad E14 
CPU: AMD 4500U
内存: 16G
JDK: 1.8
测试工具：Jmeter
负载：1000线程  ramp-up 5秒 1000循环次数
```

### eg.1

```java
@RequestMapping("buy/get")
public String buy_get() {
    Jedis jedis = jedisPool.getResource();
    String res = jedis.get("jedis:test-99");
    jedis.close();
    return res;
}
```

TPS: 13926.99  13899.51  18116.93

### eg.2

```java
@RequestMapping("buy/get2")
public String buy_get2() {
    return RedisUtil.get("jedis:test-99");
}
```

TPS: 14203.74 18032.31  14112.73

### eg.3

```java
@RequestMapping("buy/get3")
public String buy_get3() {
    ValueOperations operations = redisTemplate.opsForValue();
    return (String) operations.get("RedisTemplate:test-99");
}
```

TPS:  11842.17  11517.69  11489.50

### eg.4

```java
@RequestMapping("buy/get4")
public String buy_get4() {
    return RedisUtil2.strings().get("jedis:test-99");
}
```

TPS: 17779.36  12976.56  17614.63

### eg.5

```java
@RequestMapping("buy/get5")
public R buy_get5() {
    return R("malu99");
}
```

TPS:  18562.52  21023.86  20304.16

### eg.6

```java
@RequestMapping("buy/get6")
public String buy_get6() {
    return "malu99";
}
```

TPS:  21628.64  23030.86  22103.36

## 负载因子

eg.1

```java
private static int l = 0;

@RequestMapping("buy/factor1")
public String buy_factor1() {
    l++;
    if ((l % 10) == 0) {
        l = 0;
        return "malu";
    } else {
        return "error";
    }
}
```

TPS:  22819.07  23470.32  21456.93



# 参考：

使用Redis搭建电商秒杀系统  [https://tech.antfin.com/docs/2/63920](https://tech.antfin.com/docs/2/63920)

redis高并发秒杀测试  [https://github.com/14251104246/redis-demo](https://github.com/14251104246/redis-demo)