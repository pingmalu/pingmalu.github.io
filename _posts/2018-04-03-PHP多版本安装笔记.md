---
layout: post
title:  "PHP多版本安装笔记"
---

系统环境：Ubuntu 14.04、apache+php5.5

# 同时安装多个版本PHP

先添加ppa源

	add-apt-repository ppa:ondrej/php
	apt-get update

### 安装php5.5 (默认已存在不用装)

	apt-get install -y php5-common php5-mcrypt php5-mysql php5-gd php5-curl php5-json php5-fpm php5-mcrypt libapache2-mod-php5

### 安装php5.6

	apt-get install -y php5.6-common php5.6-mbstring php5.6-mcrypt php5.6-mysql php5.6-xml php5.6-gd php5.6-curl php5.6-json php5.6-fpm php5.6-zip php5.6-intl php5.6-dev libapache2-mod-php5.6

### 安装php7.0

	apt-get install -y php7.0-common php7.0-mbstring php7.0-mcrypt php7.0-mysql php7.0-xml php7.0-gd php7.0-curl php7.0-json php7.0-fpm php7.0-zip php7.0-intl libapache2-mod-php7.0

### 安装php7.1

	apt-get install -y php7.1-common php7.1-mbstring php7.1-mcrypt php7.1-mysql php7.1-xml php7.1-gd php7.1-curl php7.1-json php7.1-fpm php7.1-zip php7.1-intl libapache2-mod-php7.1

### 安装php7.2

	apt-get install -y php7.2-common php7.2-mbstring php7.2-mysql php7.2-xml php7.2-gd php7.2-curl php7.2-json php7.2-fpm php7.2-zip php7.2-intl libapache2-mod-php7.2

## 切换

### 打开php5.5

	a2dismod php5.6 && a2dismod php7.2 && a2enmod php5 && service apache2 restart

### 打开php5.6

	a2dismod php5 && a2dismod php7.2 && a2enmod php5.6 && service apache2 restart

### 打开php7.2

	a2dismod php5 && a2dismod php5.6 && a2enmod php7.2 && service apache2 restart


### 开启重定向

	a2enmod rewrite
	a2enmod headers

# 安装php7.0

1.添加更新源

	apt-get install -y language-pack-en-base
	LC_ALL=en_US.UTF-8 add-apt-repository ppa:ondrej/php
	apt-get update

2.卸载php5

	apt-get purge php5 php5-mysql php5-common
	apt-get --purge autoremove

3.安装php7

	apt-get install php7.0 php7.0-cli php7.0-fpm php7.0-gd php7.0-json php7.0-mysql php7.0-readline

或者

	apt-get install php7.0

4.重启apache

	service apache2 restart

查询本地包

	apt-cache search php7


# 同时安装php5和php7

不卸载php5也可以，要切换到php7只需改一下配置：

	cd /etc/apache2/mods-enabled
	rm php5.conf 
	rm php5.load 
	ln -s ../mods-available/php7.1.load 
	ln -s ../mods-available/php7.1.conf 

然后重启apache