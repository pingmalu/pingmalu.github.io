---
layout: post
title: Nodejs
---

本文记录nvm、node、npm、yarn、pnpm、bun安装过程

# 安装nvm

Windows (nvm-windowns)

下载 [https://github.com/coreybutler/nvm-windows/releases](https://github.com/coreybutler/nvm-windows/releases)

Unix、macOS 和 WSL

下载 [https://github.com/creationix/nvm](https://github.com/creationix/nvm)

## 安装node

	nvm install 20

## 切换包管理源（在国内加速安装）：

### 全局安装nrm

```powershell
 npm install nrm -g
```

nrm有默认配置，使用 nrm ls 查看，带 * 即为当前源地址:

```powershell
  npm ---------- https://registry.npmjs.org/
  yarn --------- https://registry.yarnpkg.com/
  tencent ------ https://mirrors.cloud.tencent.com/npm/
  cnpm --------- https://r.cnpmjs.org/
* taobao ------- https://registry.npmmirror.com/
  npmMirror ---- https://skimdb.npmjs.com/registry/
```
### 测试镜像速度

```powershell
$ nrm test
  npm ---------- 769 ms
  yarn --------- 712 ms
  tencent ------ 545 ms
  cnpm --------- 1537 ms
* taobao ------- 55 ms
  npmMirror ---- 898 ms
```

### nrm use 切换镜像

```powershell
nrm use taobao
```

### 使用nrm添加镜像地址

```powershell
# name 为镜像名字，url 为镜像地址
nrm add name url 
```

### 删除nrm镜像

```powershell
nrm del name
```


## 安装pnpm

	npm install -g pnpm

## 安装bun


	pnpm i bun -g



# YARN

下载地址：[https://github.com/yarnpkg/yarn/releases](https://github.com/yarnpkg/yarn/releases)

使用文档：[https://yarnpkg.com/zh-Hans/docs](https://yarnpkg.com/zh-Hans/docs)

### 升级自身yarn

	npm install yarn -g

查看yarn版本

	yarn -v

Yarn 设置淘宝镜像

1.查询当前配置的镜像

	yarn config get registry
	
	> https://registry.yarnpkg.com

2.设置成淘宝镜像

	yarn config set registry http://registry.npm.taobao.org/

3.显示当前安装的全局yarn依赖库

	yarn global list

### npm与yarn CLI 命令比较

|npm (v5) |	Yarn |
|:----|:----|
|npm install |	yarn install |
|(不适用)	| yarn install --flat |
|(不适用)	| yarn install --har |
|npm install --no-package-lock| 	yarn install --no-lockfile |
|(不适用)	| yarn install --pure-lockfile |
|npm install [package]	| yarn add [package] |
|npm install [package] --save-dev	| yarn add [package] --dev |
|(不适用)	| yarn add [package] --peer |
|npm install [package] --save-optional	| yarn add [package] --optional |
|npm install [package] --save-exact	| yarn add [package] --exact |
|(不适用)	| yarn add [package] --tilde |
|npm install [package] --global	| yarn global add [package] |
|npm update --global                  	| yarn global upgrade                     |
|npm rebuild	| yarn install --force |
|npm uninstall [package]	| yarn remove [package] |
|npm cache clean	| yarn cache clean [package] |
|rm -rf node_modules && npm install	| yarn upgrade |



### 异常处理: 使用yarn升级vue cli后显示 'vue' 不是内部或外部命令，也不是可运行的程序

解决办法：把yarn的包执行目录添加到系统环境变量里。

处理方式：

1.执行yarn global dir 显示出yarn安装路径

2.定位到Yarn\bin目录，把该路径复制到系统环境变量Path里


# nvm使用方法

列出全部可以安装的版本号

	nvm ls-remote

（windows下为）

	nvm list available

安装指定版本nodejs

	nvm install 9.3.0

切换指定版本，切换效果是全局的

	nvm use v8.0.0

查看当前使用的版本

	nvm current

查看本地安装版本，这个命令也能看到当前使用的是哪个版本

	nvm ls --depth 0

清空模块

	rm -rf node_modules/ && npm cache clean && npm prune


# npm的常用命令:

	npm ci                #使用安装package.lock.json安装，锁定依赖版本
	
	npm -v                #显示版本，检查npm 是否正确安装。
	 
	npm install express   #安装express模块
	 
	npm install -g express  #全局安装express模块
	 
	npm list              #列出已安装模块
	 
	npm show express      #显示模块详情
	 
	npm update            #升级当前目录下的项目的所有模块
	 
	npm update express    #升级当前目录下的项目的指定模块
	 
	npm update -g express  #升级全局安装的express模块
	 
	npm uninstall express  #删除指定的模块
	
	npm start --prefix path/to/your/app     # start时指定路径


