---
layout: post
title: MongoDB安装过程
---

### 快速安装

	apt-get install mongodb


### 启动

	mongod -f /etc/mongodb.conf --fork   //使用配置文件启动，并后台执行


### 连接

	mongo --host xx.xx.xx.xx --port 123

### test数据库添加用户

	use test
	db.addUser("test","test")

### 添加管理员

	db.createUser(
      { user: "admin",
        pwd: "admin",
        roles: [ { role: "root", db: "admin" } ]
      }
    )

user字段，为新用户的名字；

pwd字段，用户的密码；

roles字段，指定用户的角色，可以用一个空数组给新用户设定空角色。在roles字段,可以指定内置角色和用户定义的角色。

内建的角色:

1. 数据库用户角色：read、readWrite;
1. 数据库管理角色：dbAdmin、dbOwner、userAdmin；
1. 集群管理角色：clusterAdmin、clusterManager、clusterMonitor、hostManager；
1. 备份恢复角色：backup、restore；
1. 所有数据库角色：readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、dbAdminAnyDatabase
1. 超级用户角色：root
1. 这里还有几个角色间接或直接提供了系统超级用户的访问（dbOwner 、userAdmin、userAdminAnyDatabase）
1. 内部角色：__system

### windows下开启mongodb用户认证

修改配置文件：C:\Program Files\MongoDB\Server\3.4\mongod.cfg

添加：

	security:
        authorization: enabled

然后重启服务


### 查询

或查询：

	db.user.find({"$or":[{"title":{$regex:/linux.*/i}},{"summary":{$regex:/linux.*/i}}]})


客户端管理工具：

Robomongo [https://robomongo.org/](https://robomongo.org/)


# windowns下安装

下载地址：

   [https://www.mongodb.org/dl/win32/](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/)

安装教程：

   [https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/)
