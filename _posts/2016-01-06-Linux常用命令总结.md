---
layout: post
title: Linux常用命令总结
---
以下是平时用到的Linux命令（会不定期更新）

### Screen

启动会话

	[root@malu ~]# screen

	[root@malu ~]# screen -ls
	There is a screen on:
	        123.pts-1.malu      (Detached)
	1 Socket in /tmp/screens/S-root.
	重新连接会话：
	[root@malu ~]# screen -r 123

可以通过C-a ?来查看所有的键绑定，常用的键绑定有：

> C-a ?	显示所有键绑定信息
> 
> C-a w	显示所有窗口列表
> 
> C-a C-a	切换到之前显示的窗口
> 
> C-a c	创建一个新的运行shell的窗口并切换到该窗口
> 
> C-a n	切换到下一个窗口
> 
> C-a p	切换到前一个窗口(与C-a n相对)
> 
> C-a 0..9	切换到窗口0..9
> 
> C-a a	发送 C-a到当前窗口
> 
> C-a d	暂时断开screen会话
> 
> C-a k	杀掉当前窗口
> 
> C-a [	进入拷贝/回滚模式

### CentOS安装redis

    yum install epel-release
    yum install list
    yum install redis

### sed 命令

	插入到最后一行
	sed -i '$a\要插入的文字' file.txt
	使用 -i 选项直接修改文件。
	$ 匹配文件的最后一行位置
	a 命令在后面append

    *其实可以这样：
    echo '要插入的文字' >> file.txt

    插入到第一行
	sed -i '1i\要插入的文字' file.txt

    替换一行文字
    sed -i 's/^被替换的文字/要替换的文字/' file.txt


### 把错误输出到标准输出：2>&1

	2> 表示把标准错误(stderr)重定向，尖括号后面可以跟文件名，或者是&1, &2，分别表示重定向到标准输出和标准错误。

### nohup后台执行

	nohup command > myout.file 2>&1 &

在上面的例子中，输出被重定向到myout.file文件中。 　　

使用 jobs 查看任务。 　　

使用 fg %n　关闭


### 监视某进程的资源占用情况(pid进程id)：

    ps -p pid
    
### 在目录中找指定后缀的文件内容包含某个关键字的：

    find ./ -name "*.php"|xargs grep -n xxx

### grep匹配上下文

grep -C 5 foo file  显示file文件中匹配foo字串那行以及上下5行

grep -B 5 foo file  显示foo及前5行

grep -A 5 foo file  显示foo及后5行

### scp命令 ###

scp -P 4588 root@www.abc.com:/root/sn.sh /home/admin

-r 递归目录
    
-v 和大多数 linux 命令中的 -v 意思一样 , 用来显示进度 . 可以用来查看连接 , 认证 , 或是配置错误 . 

-C 使能压缩选项 . 

-P 选择端口 . 注意 -p 已经被 rcp 使用 . 

-4 强行使用 IPV4 地址 . 

-6 强行使用 IPV6 地址 .

### mount挂载目录 

	//挂载exfat
	mount -t exfat -o iocharset=cp936 /dev/sdb1


### 获取BGP骨干网IP地址

	//facebook
    whois -h whois.radb.net -i origin AS32934|grep ^route

    //谷歌 GAE解析地址:ghs.googlehosted.com
    whois -h whois.radb.net -i origin AS15169|grep ^route

    //[Incapsula](http://bgp.he.net/AS19551)
    whois -h whois.radb.net -i origin AS19551|grep ^route

    //cloudflare 节点众多，用这个查吧
	http://bgp.he.net/search?search%5Bsearch%5D=cloudflare